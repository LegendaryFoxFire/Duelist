reimplement transparent and blacked out image stuff sorry about breaking it
